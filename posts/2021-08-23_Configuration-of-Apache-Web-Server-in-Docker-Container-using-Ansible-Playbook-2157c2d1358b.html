<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Configuration of Apache Web-Server in Docker Container using Ansible Playbook</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Configuration of Apache Web-Server in Docker Container using Ansible Playbook</h1>
</header>
<section data-field="subtitle" class="p-summary">
Configuration of Apache Web-Server in Docker Container using Ansible Playbook
</section>
<section data-field="body" class="e-content">
<section name="9806" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="0090" id="0090" class="graf graf--h3 graf--leading graf--title">Configuration of Apache Web-Server in Docker Container using Ansible¬†Playbook</h3><p name="20a0" id="20a0" class="graf graf--p graf-after--h3">Configuration of Apache Web-Server in Docker Container using Ansible Playbook</p><figure name="fbb3" id="fbb3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*O1GsvpMIIkgd0pw_-gglyQ.png" data-width="1390" data-height="760" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*O1GsvpMIIkgd0pw_-gglyQ.png"></figure><p name="b261" id="b261" class="graf graf--p graf-after--figure">I am using RedHat Linux 8 on Virtual Machine for performing this task.</p><p name="e5c3" id="e5c3" class="graf graf--p graf-after--p">We use two Redhat VM, one for C<strong class="markup--strong markup--p-strong">ontroller node </strong>and other for <strong class="markup--strong markup--p-strong">Managed node or Slave node. </strong>As you can see in below image the VM of name <strong class="markup--strong markup--p-strong">Redhat 8 Ansible_Task</strong> will be our <strong class="markup--strong markup--p-strong">Controller node</strong> and the VM of name <strong class="markup--strong markup--p-strong">Redhat</strong> will be our <strong class="markup--strong markup--p-strong">Managed node</strong></p><figure name="706d" id="706d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*n0wXSlqjJ4A-Fjd64aeYFA.png" data-width="2354" data-height="1874" src="https://cdn-images-1.medium.com/max/800/1*n0wXSlqjJ4A-Fjd64aeYFA.png"></figure><p name="2b51" id="2b51" class="graf graf--p graf-after--figure">Before that check if python3 is intalled or not using command <strong class="markup--strong markup--p-strong">python3 -V</strong>¬†.</p><p name="e2ac" id="e2ac" class="graf graf--p graf-after--p">Check if ansible is installed or not using command <strong class="markup--strong markup--p-strong">ansible --version</strong> and if not installed than use command <strong class="markup--strong markup--p-strong">yum install ansible</strong> to installed it.</p><figure name="9695" id="9695" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*qoBVB0E5DmynbsbVkmz_TQ.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*qoBVB0E5DmynbsbVkmz_TQ.png"></figure><p name="97ec" id="97ec" class="graf graf--p graf-after--figure">Check Managed Node / Slave node IP address using command <strong class="markup--strong markup--p-strong">ifconfig </strong>on terminal</p><figure name="8193" id="8193" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*yiWT1v6B_nOH1ctz44doyQ.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*yiWT1v6B_nOH1ctz44doyQ.png"></figure><p name="a822" id="a822" class="graf graf--p graf-after--figure">Setting the Slave node configuration file so that our ansible system can connect to the target node. Created the host-file which contains all this info of slave node in dir (/etc/ansible/hosts)</p><figure name="a15e" id="a15e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*c1frMLE7ANbUzow6lXrLjw.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*c1frMLE7ANbUzow6lXrLjw.png"></figure><p name="3058" id="3058" class="graf graf--p graf-after--figure">Creating the ansible.cfg which is configuration file for ansible and storing their our inventory.</p><figure name="1638" id="1638" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HJQmaEUtvbAclovQUupAWQ.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*HJQmaEUtvbAclovQUupAWQ.png"></figure><p name="99f4" id="99f4" class="graf graf--p graf-after--figure">To check our list of nodes present in our inventory file use command</p><p name="f154" id="f154" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">ansible all --list-hosts.</strong></p><figure name="f592" id="f592" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*6MyrjrlaTCR7QgxK_vW1Yg.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*6MyrjrlaTCR7QgxK_vW1Yg.png"></figure><p name="732d" id="732d" class="graf graf--p graf-after--figure">Before running our ansible playbook we have to check our connection with managed node for that use command</p><p name="9c65" id="9c65" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">ansible all -m ping</strong></p><figure name="d5bd" id="d5bd" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*Yyn11EvkCD-0FGHvI_AdDg.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*Yyn11EvkCD-0FGHvI_AdDg.png"></figure><p name="3f5a" id="3f5a" class="graf graf--p graf-after--figure">As you can see that there is message ‚Äúping: pong‚Äù which means our managed node is successfully connected with our controller node.</p><p name="44fa" id="44fa" class="graf graf--p graf-after--p">Created a ansible playbook and in this playbook we had configured yum repository for docker and installed docker package and through pip we had installed the docker sdk, Also started the docker service.</p><p name="b769" id="b769" class="graf graf--p graf-after--p">Here anisble-docker.yml is my ansible playbook file which contain the code of task and web.html file is used to copy html code in /var/www/html directory.</p><p name="c92c" id="c92c" class="graf graf--p graf-after--p">The code written in ansible playbook is as follows:</p><figure name="7b8a" id="7b8a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*fSYfp3Jgm0AwB3LlEySTtg.png" data-width="1961" data-height="1214" src="https://cdn-images-1.medium.com/max/800/1*fSYfp3Jgm0AwB3LlEySTtg.png"></figure><p name="d072" id="d072" class="graf graf--p graf-after--figure">An Ansible PlayBook that does the following operations in the managed nodes:</p><p name="973f" id="973f" class="graf graf--p graf-after--p">üîπ Configure Docker¬†:</p><figure name="8442" id="8442" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nOJt_18D-mvWQSnKhHAkiA.png" data-width="1511" data-height="455" src="https://cdn-images-1.medium.com/max/800/1*nOJt_18D-mvWQSnKhHAkiA.png"></figure><p name="cbc8" id="cbc8" class="graf graf--p graf-after--figure">üîπ Start and enable Docker services¬†:</p><figure name="4cb3" id="4cb3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*_0BhtvbDItDixswhNWsq6g.png" data-width="1506" data-height="280" src="https://cdn-images-1.medium.com/max/800/1*_0BhtvbDItDixswhNWsq6g.png"></figure><p name="dceb" id="dceb" class="graf graf--p graf-after--figure">üîπ Pull the httpd server image from the Docker Hub and Run the docker container and expose it to the public</p><figure name="ee79" id="ee79" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*pYgXWBnpFseBVyRay6jtkQ.png" data-width="1503" data-height="316" src="https://cdn-images-1.medium.com/max/800/1*pYgXWBnpFseBVyRay6jtkQ.png"></figure><p name="f36c" id="f36c" class="graf graf--p graf-after--figure">üîπ Copy the html code in /var/www/html directory and start the web server¬†:</p><figure name="4b38" id="4b38" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*sn1LcS_B0B6s9voMZgCjnw.png" data-width="1503" data-height="286" src="https://cdn-images-1.medium.com/max/800/1*sn1LcS_B0B6s9voMZgCjnw.png"></figure><p name="5a71" id="5a71" class="graf graf--p graf-after--figure">This was a simple playbook to configure Apache Web-Server in Docker Container using Ansible Playbook¬†. This code can be used for each environment if you want to duplicate a similar setup to any other environment; you just need to make sure you have updated the required values in your environment-specific inventory file.</p><p name="780a" id="780a" class="graf graf--p graf-after--p">To run ansible playbook we have to write command:</p><p name="9aa0" id="9aa0" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">ansible-playbook your_playbook_name.yml</strong></p><figure name="ce1e" id="ce1e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*dJzkmLNGB3mkZ_Ie2lPu7w.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*dJzkmLNGB3mkZ_Ie2lPu7w.png"></figure><p name="04f7" id="04f7" class="graf graf--p graf-after--figure">After successful running of playbook, you can check the container whether it is launched successfully or not in Managed/Slave Node.</p><p name="92c9" id="92c9" class="graf graf--p graf-after--p">Run <strong class="markup--strong markup--p-strong">docker --version </strong>and <strong class="markup--strong markup--p-strong">docker ps </strong>commands to whether docker is successfully installed or not and check running container.</p><figure name="cd4a" id="cd4a" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*64_KrNVwOFoMUxXvXlYOmg.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*64_KrNVwOFoMUxXvXlYOmg.png"></figure><p name="4bc6" id="4bc6" class="graf graf--p graf-after--figure">Now you can connect this ip and see the web page</p><figure name="cfba" id="cfba" class="graf graf--figure graf-after--p graf--trailing"><img class="graf-image" data-image-id="1*YPfOUmJdP6M5pSV1Lc4tNg.png" data-width="1962" data-height="1450" src="https://cdn-images-1.medium.com/max/800/1*YPfOUmJdP6M5pSV1Lc4tNg.png"></figure></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@tiybok45" class="p-author h-card">Rutvik Bhalerao</a> on <a href="https://medium.com/p/2157c2d1358b"><time class="dt-published" datetime="2021-08-23T12:01:25.792Z">August 23, 2021</time></a>.</p><p><a href="https://medium.com/@tiybok45/configuration-of-apache-web-server-in-docker-container-using-ansible-playbook-2157c2d1358b" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 22, 2022.</p></footer></article></body></html>