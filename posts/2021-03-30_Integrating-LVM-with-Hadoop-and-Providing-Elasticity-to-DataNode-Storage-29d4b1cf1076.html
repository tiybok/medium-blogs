<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Integrating LVM with Hadoop and Providing Elasticity to DataNode Storage</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Integrating LVM with Hadoop and Providing Elasticity to DataNode Storage</h1>
</header>
<section data-field="subtitle" class="p-summary">
We will have good understanding of the various components that LVM manages to create a flexible storage system integrated with…
</section>
<section data-field="body" class="e-content">
<section name="cc17" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="8aef" id="8aef" class="graf graf--h3 graf--leading graf--title">Integrating LVM with Hadoop and Providing Elasticity to DataNode Storage</h3><p name="2772" id="2772" class="graf graf--p graf-after--h3">We will have good understanding of the various components that LVM manages to create a flexible storage system integrated with hadoop.</p><figure name="e2fa" id="e2fa" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*vT_K4aNdoppKA90JkMz57w.png" data-width="1600" data-height="900" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*vT_K4aNdoppKA90JkMz57w.png"></figure><h3 name="1840" id="1840" class="graf graf--h3 graf-after--figure">Integrating LVM with Hadoop and Providing Elasticity to DataNode Storage</h3><p name="4945" id="4945" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">LVM (</strong>Logical Volume Management) is a storage device management technology that gives users the power to pool and abstract the physical layout of component storage devices for easier and flexible administration. Utilizing the device mapper Linux kernel framework, the current iteration, LVM2, can be used to gather existing storage devices into groups and allocate logical units from the combined space as needed.</p><p name="c0ce" id="c0ce" class="graf graf--p graf-after--p">The main advantages of LVM are increased abstraction, flexibility, and control. Logical volumes can have meaningful names like “databases” or “root-backup”. Volumes can be resized dynamically as space requirements change and migrated between physical devices within the pool on a running system or exported easily. LVM also offers advanced features like snapshotting, striping, and mirroring.</p><h3 name="4a68" id="4a68" class="graf graf--h3 graf-after--p">LVM Architecture and Terminology</h3><p name="d92c" id="d92c" class="graf graf--p graf-after--h3">Before we dive into the actual LVM administrative commands, it is important to have a basic understanding of how LVM organizes storage devices and some of the terminology it employs.</p><h3 name="dd35" id="dd35" class="graf graf--h3 graf-after--p">LVM Storage Management Structures</h3><p name="c33d" id="c33d" class="graf graf--p graf-after--h3">LVM functions by layering abstractions on top of physical storage devices. The basic layers that LVM uses, starting with the most primitive, are.</p><ul class="postList"><li name="2ec6" id="2ec6" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Physical Volumes</strong>:</li></ul><p name="4485" id="4485" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">LVM utility prefix</strong>: pv.</p><p name="664e" id="664e" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Description</strong>: Physical block devices or other disk-like devices (for example, other devices created by device mapper, like RAID arrays) are used by LVM as the raw building material for higher levels of abstraction. Physical volumes are regular storage devices. LVM writes a header to the device to allocate it for management.</p><ul class="postList"><li name="537e" id="537e" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Volume Groups</strong>:</li></ul><p name="e4ff" id="e4ff" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">LVM utility prefix</strong>: vg</p><p name="5883" id="5883" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Description</strong>: LVM combines physical volumes into storage pools known as volume groups. Volume groups abstract the characteristics of the underlying devices and function as a unified logical device with combined storage capacity of the component physical volumes.</p><ul class="postList"><li name="0783" id="0783" class="graf graf--li graf-after--p"><strong class="markup--strong markup--li-strong">Logical Volumes</strong>:</li></ul><p name="cc8d" id="cc8d" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">LVM utility prefix</strong>: lv</p><p name="ec69" id="ec69" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Description</strong>: A volume group can be sliced up into any number of logical volumes. Logical volumes are functionally equivalent to partitions on a physical disk, but with much more flexibility. Logical volumes are the primary component that users and applications will interact with.</p><h4 name="50ae" id="50ae" class="graf graf--h4 graf-after--p">Inside DataNode VM</h4><h4 name="6f73" id="6f73" class="graf graf--h4 graf-after--h4">1. Open virtual box, create a hard disk of size 50GB. It is to be considered as datanode.</h4><p name="004a" id="004a" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">(A) Go Storage in Settings of DataNode And Click on “Controller: SATA” &amp; after this click on right “+” icon of “Controller: SATA” -</strong></p><figure name="ca9e" id="ca9e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*faO3rv0GUwEEtg-_OOlNcA.png" data-width="2051" data-height="1362" src="https://cdn-images-1.medium.com/max/800/1*faO3rv0GUwEEtg-_OOlNcA.png"></figure><p name="74a5" id="74a5" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(B) Click On “Create” -</strong></p><figure name="67c3" id="67c3" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*O2lWuVZD5QbYBIhUKftzDQ.png" data-width="2054" data-height="1361" src="https://cdn-images-1.medium.com/max/800/1*O2lWuVZD5QbYBIhUKftzDQ.png"></figure><p name="dc79" id="dc79" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(C) Click on “Next” -</strong></p><figure name="1ce5" id="1ce5" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*B7P77m9-RLxcT2lv04bJdw.png" data-width="2059" data-height="1360" src="https://cdn-images-1.medium.com/max/800/1*B7P77m9-RLxcT2lv04bJdw.png"></figure><p name="dba3" id="dba3" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(D) Again “Next” -</strong></p><figure name="5751" id="5751" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*KvW4f7EQDDrQFK2Gvq0AiQ.png" data-width="2055" data-height="1361" src="https://cdn-images-1.medium.com/max/800/1*KvW4f7EQDDrQFK2Gvq0AiQ.png"></figure><p name="1349" id="1349" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(E) Choose your Hard Disk Size &amp; Do “Create” —</strong></p><p name="ab24" id="ab24" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">(</strong>In my case My Hard Disk size is 50 GB)</p><figure name="e65e" id="e65e" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*egrU1LUU8lkhAE3r7UB7Aw.png" data-width="2054" data-height="1360" src="https://cdn-images-1.medium.com/max/800/1*egrU1LUU8lkhAE3r7UB7Aw.png"></figure><p name="0d49" id="0d49" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(F) Click on “RedHat 8 Hadoop DataNode_1.vdi” because in my case hard disk name is “RedHat 8 Hadoop DataNode_1.vdi” &amp; and choose it -</strong></p><figure name="9b9b" id="9b9b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*yMcpvnkxwY1F267xfwkA0w.png" data-width="2062" data-height="1358" src="https://cdn-images-1.medium.com/max/800/1*yMcpvnkxwY1F267xfwkA0w.png"></figure><p name="f0ca" id="f0ca" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">(G) Now our Hard Disk is attached -</strong></p><figure name="7d73" id="7d73" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*CTsLuGkwGD1p1AUTBDx9ZA.png" data-width="2066" data-height="1372" src="https://cdn-images-1.medium.com/max/800/1*CTsLuGkwGD1p1AUTBDx9ZA.png"></figure><h4 name="f703" id="f703" class="graf graf--h4 graf-after--figure">2. Start the virtual machine.</h4><figure name="e82e" id="e82e" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*uNNdEsmiNAhFPXTIZLrK8w.png" data-width="1220" data-height="989" src="https://cdn-images-1.medium.com/max/800/1*uNNdEsmiNAhFPXTIZLrK8w.png"></figure><h4 name="f47d" id="f47d" class="graf graf--h4 graf-after--figure">3. Creating the physical volume.</h4><figure name="9e79" id="9e79" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*IxGspfpCdolcekiOYAS-UA.png" data-width="1225" data-height="988" src="https://cdn-images-1.medium.com/max/800/1*IxGspfpCdolcekiOYAS-UA.png"></figure><h4 name="417f" id="417f" class="graf graf--h4 graf-after--figure">4. Displaying the physical volume created.</h4><figure name="eadd" id="eadd" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*Dzzwsf5R_h2xZxopUEFt0Q.png" data-width="1218" data-height="996" src="https://cdn-images-1.medium.com/max/800/1*Dzzwsf5R_h2xZxopUEFt0Q.png"></figure><h4 name="ccad" id="ccad" class="graf graf--h4 graf-after--figure">5. Create a volume group “abc” and Displaying the volume group “abc”</h4><figure name="05ff" id="05ff" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*8Xr8-g0MkA2ikjSpwG8QDw.png" data-width="1238" data-height="992" src="https://cdn-images-1.medium.com/max/800/1*8Xr8-g0MkA2ikjSpwG8QDw.png"></figure><h4 name="2a2d" id="2a2d" class="graf graf--h4 graf-after--figure">6. Creating logical volume of size 30GB and naming it as “qwe”</h4><figure name="371a" id="371a" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*ZZUi56hm_NTgvm90xFhsRg.png" data-width="1243" data-height="990" src="https://cdn-images-1.medium.com/max/800/1*ZZUi56hm_NTgvm90xFhsRg.png"></figure><h4 name="c61c" id="c61c" class="graf graf--h4 graf-after--figure">7. Displaying the logical volume “qwe”. It shows the LV Path</h4><figure name="b272" id="b272" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*CNSTnUtTUmk87X6R3f9rYg.png" data-width="1242" data-height="990" src="https://cdn-images-1.medium.com/max/800/1*CNSTnUtTUmk87X6R3f9rYg.png"></figure><h4 name="6fc4" id="6fc4" class="graf graf--h4 graf-after--figure">8. Formatting the logical volume “qwe”</h4><figure name="5482" id="5482" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*DtyQHzP1dmniDjb1f76SBw.png" data-width="1225" data-height="988" src="https://cdn-images-1.medium.com/max/800/1*DtyQHzP1dmniDjb1f76SBw.png"></figure><h4 name="5a25" id="5a25" class="graf graf--h4 graf-after--figure">9. Creating a directory “/db” and mounting the logical volume on the top and Displaying all the hard drives.</h4><figure name="cc26" id="cc26" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*Fj35tZ4KFqWFQjeZ4anIew.png" data-width="1222" data-height="978" src="https://cdn-images-1.medium.com/max/800/1*Fj35tZ4KFqWFQjeZ4anIew.png"></figure><h4 name="f524" id="f524" class="graf graf--h4 graf-after--figure">10. Already configured the hdfs-site.xml by providing the point in the ‘value’ field.</h4><figure name="905d" id="905d" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*rwCTTa-iL_jxRt9JQzXcZQ.png" data-width="1230" data-height="994" src="https://cdn-images-1.medium.com/max/800/1*rwCTTa-iL_jxRt9JQzXcZQ.png"></figure><h4 name="dc92" id="dc92" class="graf graf--h4 graf-after--figure">11. Now in NameNode, start the services.</h4><figure name="dfae" id="dfae" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*Dobs3mbVmgUtCOLP01OCgw.png" data-width="1439" data-height="764" src="https://cdn-images-1.medium.com/max/800/1*Dobs3mbVmgUtCOLP01OCgw.png"></figure><h4 name="c4bf" id="c4bf" class="graf graf--h4 graf-after--figure">12. Go back to DataNode and start the Hadoop-daemon.</h4><figure name="1330" id="1330" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*PpsKlEmjhzSczYzAP0dYPQ.png" data-width="1437" data-height="1138" src="https://cdn-images-1.medium.com/max/800/1*PpsKlEmjhzSczYzAP0dYPQ.png"></figure><h4 name="1e8a" id="1e8a" class="graf graf--h4 graf-after--figure">13. Checking the available volume available for the NameNode.</h4><figure name="da4e" id="da4e" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*7xahr3L-URPqxCZINvWS2g.png" data-width="1239" data-height="645" src="https://cdn-images-1.medium.com/max/800/1*7xahr3L-URPqxCZINvWS2g.png"></figure><h3 name="a75f" id="a75f" class="graf graf--h3 graf-after--figure">Increase or Decrease the Size of Static Partition in Linux.</h3><h4 name="c153" id="c153" class="graf graf--h4 graf-after--h3">14.Increasing the shared volume in DataNode.</h4><figure name="a51f" id="a51f" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*mnkCXgAlBMKSmFkynjdugg.png" data-width="1253" data-height="1008" src="https://cdn-images-1.medium.com/max/800/1*mnkCXgAlBMKSmFkynjdugg.png"></figure><h4 name="e079" id="e079" class="graf graf--h4 graf-after--figure">15. Formatting the newly created logical volume in DataNode</h4><figure name="41b8" id="41b8" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*yuAqelbypLpcxxXjoqVt1A.png" data-width="1246" data-height="1014" src="https://cdn-images-1.medium.com/max/800/1*yuAqelbypLpcxxXjoqVt1A.png"></figure><h4 name="d02f" id="d02f" class="graf graf--h4 graf-after--figure">16. Run the report command in the NameNode to check the volume shared by the DataNode.</h4><figure name="ee4c" id="ee4c" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*JUjXgDhRH8C6kIGKSvGUKA.png" data-width="1223" data-height="659" src="https://cdn-images-1.medium.com/max/800/1*JUjXgDhRH8C6kIGKSvGUKA.png"></figure><h3 name="2517" id="2517" class="graf graf--h3 graf-after--figure">Conclusion</h3><h4 name="fde5" id="fde5" class="graf graf--h4 graf-after--h3 graf--trailing">Hopefully, by this point, We will have a fairly good understanding of the various components that LVM manages to create a flexible storage system. We should also have a basic understanding of how to get storage devices up and running in an LVM setup. In summary, LVM can be used to combine physical volumes into volume groups to unify the storage space available on a system. Afterwards, administrators can segment the volume group into arbitrary logical volumes, which act as flexible partitions.</h4></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@tiybok45" class="p-author h-card">Rutvik Bhalerao</a> on <a href="https://medium.com/p/29d4b1cf1076"><time class="dt-published" datetime="2021-03-30T10:26:46.096Z">March 30, 2021</time></a>.</p><p><a href="https://medium.com/@tiybok45/integrating-lvm-with-hadoop-and-providing-elasticity-to-datanode-storage-29d4b1cf1076" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 22, 2022.</p></footer></article></body></html>