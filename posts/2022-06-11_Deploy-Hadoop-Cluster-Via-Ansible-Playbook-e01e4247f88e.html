<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Deploy Hadoop Cluster Via Ansible Playbook</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Deploy Hadoop Cluster Via Ansible Playbook</h1>
</header>
<section data-field="subtitle" class="p-summary">
Deploy Hadoop Cluster Via Ansible Playbook
</section>
<section data-field="body" class="e-content">
<section name="1f55" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><h3 name="4800" id="4800" class="graf graf--h3 graf--leading graf--title">Deploy Hadoop Cluster Via Ansible Playbook</h3><p name="1f56" id="1f56" class="graf graf--p graf-after--h3">Deploy Hadoop Cluster Via Ansible Playbook</p><figure name="e9c1" id="e9c1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*nErPui7tgH6n3WXKg1R6xA.png" data-width="668" data-height="274" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*nErPui7tgH6n3WXKg1R6xA.png"></figure><h3 name="e827" id="e827" class="graf graf--h3 graf-after--figure">ANSIBLE</h3><p name="7e5a" id="7e5a" class="graf graf--p graf-after--h3">Ansible is a radically simple IT automation engine that automates cloud provisioning, configuration management, application deployment, intra-service orchestration, and many other IT needs.</p><div name="6625" id="6625" class="graf graf--mixtapeEmbed graf-after--p"><a href="https://tiybok45.medium.com/how-industries-are-solving-challenges-using-ansible-69c835962825" data-href="https://tiybok45.medium.com/how-industries-are-solving-challenges-using-ansible-69c835962825" class="markup--anchor markup--mixtapeEmbed-anchor" title="https://tiybok45.medium.com/how-industries-are-solving-challenges-using-ansible-69c835962825"><strong class="markup--strong markup--mixtapeEmbed-strong"><em class="markup--em markup--mixtapeEmbed-em">How Industries Are Solving Challenges Using Ansible</em></strong><br>How Industries Are Solving Challenges Using Ansibletiybok45.medium.com</a><a href="https://tiybok45.medium.com/how-industries-are-solving-challenges-using-ansible-69c835962825" class="js-mixtapeImage mixtapeImage u-ignoreBlock" data-media-id="33f823e0451676f12630fca313c9d78f" data-thumbnail-img-id="1*QqN1OVK64OeM9uUf7SkSNg.png" style="background-image: url(https://cdn-images-1.medium.com/fit/c/160/160/1*QqN1OVK64OeM9uUf7SkSNg.png);"></a></div><h3 name="9723" id="9723" class="graf graf--h3 graf-after--mixtapeEmbed">Ansible Playbook</h3><p name="6cb4" id="6cb4" class="graf graf--p graf-after--h3">While modules provide the means of accomplishing a task, the way you use them is through an Ansible <em class="markup--em markup--p-em">playbook</em>. A playbook is a configuration file written in YAML that provides instructions for what needs to be done in order to bring a managed node into the desired state. Playbooks are meant to be simple, human-readable, and self-documenting. They are also <em class="markup--em markup--p-em">idempotent</em>, meaning that a playbook can be run on a system at any time without having a negative effect upon it. If a playbook is run on a system that’s already properly configured and in its desired state, then that system should still be properly configured after a playbook runs.</p><h3 name="ba9e" id="ba9e" class="graf graf--h3 graf-after--p">Hadoop</h3><p name="c1a0" id="c1a0" class="graf graf--p graf-after--h3">The Apache Hadoop software library is a framework that allows for the distributed processing of large data sets across clusters of computers using simple programming models. It is designed to scale up from single servers to thousands of machines, each offering local computation and storage. Rather than rely on hardware to deliver high-availability, the library itself is designed to detect and handle failures at the application layer, so delivering a highly-available service on top of a cluster of computers, each of which may be prone to failures.</p><h4 name="4902" id="4902" class="graf graf--h4 graf-after--p">NameNode</h4><p name="c429" id="c429" class="graf graf--p graf-after--h4">NameNode is the centerpiece of HDFS.It is also known as the Master. It only stores the metadata of HDFS , the directory tree of all files in the file system, and tracks the files across the cluster.NameNode does not store the actual data or the dataset. The data itself is actually stored in the DataNodes. NameNode knows the list of the blocks and its location for any given file in HDFS. With this information NameNode knows how to construct the file from blocks.It is so critical to HDFS and when the NameNode is down, HDFS/Hadoop cluster is inaccessible and considered down.NameNode is a single point of failure in Hadoop cluster.It is usually configured with a lot of memory (RAM). Because the block locations are help in main memory.</p><h4 name="aa05" id="aa05" class="graf graf--h4 graf-after--p">DataNode</h4><p name="93fa" id="93fa" class="graf graf--p graf-after--h4">DataNode is responsible for storing the actual data in HDFS. It is also known as the Slave.NameNode and DataNode are in constant communication.When a DataNode starts up it announce itself to the NameNode along with the list of blocks it is responsible for.When a DataNode is down, it does not affect the availability of data or the cluster. NameNode will arrange for replication for the blocks managed by the DataNode that is not available.It is usually configured with a lot of hard disk space. Because the actual data is stored in the DataNode.</p><h4 name="1935" id="1935" class="graf graf--h4 graf-after--p">Key Difference between NameNode and DataNode</h4><p name="4343" id="4343" class="graf graf--p graf-after--h4">The main difference between NameNode and DataNode in Hadoop is that the NameNode is the master node in Hadoop Distributed File System that manages the file system metadata while the DataNode is a slave node in Hadoop distributed file system that stores the actual data as instructed by the NameNode.</p><p name="afee" id="afee" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">So let’s launch the Hadoop Cluster using Ansible Playbook over the Virtual Machine:</strong></p><p name="b226" id="b226" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Steps to be followed:-</strong></p><p name="5cd3" id="5cd3" class="graf graf--p graf-after--p">I am using <strong class="markup--strong markup--p-strong">RedHat Linux 8 </strong>on Virtual Machine for performing this task.</p><p name="8ad6" id="8ad6" class="graf graf--p graf-after--p">We use three Redhat VMs, one for C<strong class="markup--strong markup--p-strong">ontroller node </strong>and other for <strong class="markup--strong markup--p-strong">Managed nodes or Slave nodes. </strong>As you can see in below image the VM of name <strong class="markup--strong markup--p-strong">Arth Ansible </strong>will be our <strong class="markup--strong markup--p-strong">Controller node</strong> and the VM of name <strong class="markup--strong markup--p-strong">Redhat 8_1 NameNode and Redhat 8_2 DataNode </strong>will be our <strong class="markup--strong markup--p-strong">Managed nodes</strong></p><figure name="6ccd" id="6ccd" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*dNz0fOqjKFSxqWxW1j02mQ.png" data-width="2354" data-height="1874" src="https://cdn-images-1.medium.com/max/800/1*dNz0fOqjKFSxqWxW1j02mQ.png"></figure><p name="6bc0" id="6bc0" class="graf graf--p graf-after--figure">Before that check if python3 is intalled or not using command <strong class="markup--strong markup--p-strong">python3 -V</strong></p><p name="d4c9" id="d4c9" class="graf graf--p graf-after--p">Check if ansible is installed or not using command <strong class="markup--strong markup--p-strong">ansible --version</strong> and if not installed than use command <strong class="markup--strong markup--p-strong">yum install ansible</strong> to installed it.</p><figure name="acd8" id="acd8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*QgZ_I1Eh43B8dUOYFWxhzw.png" data-width="1839" data-height="1253" src="https://cdn-images-1.medium.com/max/800/1*QgZ_I1Eh43B8dUOYFWxhzw.png"></figure><p name="6d65" id="6d65" class="graf graf--p graf-after--figure">Check Managed Nodes / Slave nodes IP address using command <strong class="markup--strong markup--p-strong">ifconfig </strong>on terminal</p><p name="1056" id="1056" class="graf graf--p graf-after--p">Redhat 8_1 NameNode</p><figure name="4b49" id="4b49" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*9o9wKtWlvDBEv6RD2IUJhA.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*9o9wKtWlvDBEv6RD2IUJhA.png"></figure><p name="4a44" id="4a44" class="graf graf--p graf-after--figure">Redhat 8_2 DataNode</p><figure name="edd8" id="edd8" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*lna_aHXw2TnAlxYhgH_LHQ.png" data-width="2326" data-height="1982" src="https://cdn-images-1.medium.com/max/800/1*lna_aHXw2TnAlxYhgH_LHQ.png"></figure><p name="7a92" id="7a92" class="graf graf--p graf-after--figure">Setting the Slave node configuration file so that our ansible system can connect to the target node. Created the host-file which contains all this info of slave node in dir (/etc/ansible/hosts)</p><figure name="7f5f" id="7f5f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*qla64APTsIY8vRwlOvKXKg.png" data-width="1911" data-height="1264" src="https://cdn-images-1.medium.com/max/800/1*qla64APTsIY8vRwlOvKXKg.png"></figure><p name="60ac" id="60ac" class="graf graf--p graf-after--figure">Creating the ansible.cfg which is configuration file for ansible and storing their our inventory</p><figure name="d74f" id="d74f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*UVN6Ad_tKmH9vlgJIU93GQ.png" data-width="1903" data-height="1193" src="https://cdn-images-1.medium.com/max/800/1*UVN6Ad_tKmH9vlgJIU93GQ.png"></figure><p name="fa11" id="fa11" class="graf graf--p graf-after--figure">To check our list of nodes present in our inventory file use command</p><p name="3e1c" id="3e1c" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">ansible all --list-hosts</strong></p><p name="724e" id="724e" class="graf graf--p graf-after--p">And before running our ansible playbook we have to check our connection with managed node for that use command</p><p name="d9a7" id="d9a7" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">ansible all -m ping</strong></p><figure name="e679" id="e679" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*1D2zqF_8xiKzbXH6bEgFvA.png" data-width="1907" data-height="1260" src="https://cdn-images-1.medium.com/max/800/1*1D2zqF_8xiKzbXH6bEgFvA.png"></figure><p name="1f90" id="1f90" class="graf graf--p graf-after--figure">As you can see that there is message “ping: pong” which means our managed node is successfully connected with our controller node.</p><h3 name="9a7b" id="9a7b" class="graf graf--h3 graf-after--p">NameNode Playbook:</h3><p name="a7f7" id="a7f7" class="graf graf--p graf-after--h3">Steps for NameNode Playbook</p><h3 name="4e11" id="4e11" class="graf graf--h3 graf-after--p">Writing the core-site.xml file for NameNode</h3><h4 name="de72" id="de72" class="graf graf--h4 graf-after--h3">core-site.xml</h4><p name="9523" id="9523" class="graf graf--p graf-after--h4">The core-site.xml<strong class="markup--strong markup--p-strong"> </strong>file informs Hadoop daemon where NameNode runs in the cluster. It contains the configuration settings for Hadoop Core such as I/O settings that are common to HDFS and MapReduce.</p><figure name="7ce1" id="7ce1" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zTiA4bfpnRnQ1T9cULITpw.png" data-width="1900" data-height="1249" src="https://cdn-images-1.medium.com/max/800/1*zTiA4bfpnRnQ1T9cULITpw.png"></figure><h3 name="5f99" id="5f99" class="graf graf--h3 graf-after--figure">Writing the hdfs-site.xml file for NameNode</h3><h4 name="9f61" id="9f61" class="graf graf--h4 graf-after--h3">hdfs-site.xml</h4><p name="c4ee" id="c4ee" class="graf graf--p graf-after--h4">The hdfs-site.xml file contains the configuration settings for HDFS daemons; the NameNode, the Secondary NameNode, and the DataNodes. Here, we can configure hdfs-site.xml to specify default block replication and permission checking on HDFS. The actual number of replications can also be specified when the file is created. The default is used if replication is not specified in create time.</p><figure name="cb3f" id="cb3f" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*o4WPB9mwffLejdj1dcrixA.png" data-width="1906" data-height="1257" src="https://cdn-images-1.medium.com/max/800/1*o4WPB9mwffLejdj1dcrixA.png"></figure><h3 name="d25c" id="d25c" class="graf graf--h3 graf-after--figure">Writing the namenode.yml file for NameNode Ansible-Playbook:</h3><ul class="postList"><li name="6a04" id="6a04" class="graf graf--li graf-after--h3">Install JDK.</li><li name="e278" id="e278" class="graf graf--li graf-after--li">Install Hadoop.</li><li name="2846" id="2846" class="graf graf--li graf-after--li">Configure the core-site.xml file.</li><li name="18c7" id="18c7" class="graf graf--li graf-after--li">Configure the hdfs-site.xml file.</li><li name="9038" id="9038" class="graf graf--li graf-after--li">Create Directory.</li><li name="9cba" id="9cba" class="graf graf--li graf-after--li">Format the NameNode.</li><li name="0fc8" id="0fc8" class="graf graf--li graf-after--li">Start the Hadoop service in Node.</li><li name="840c" id="840c" class="graf graf--li graf-after--li">Check the Report.</li></ul><figure name="c5da" id="c5da" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*DITRZSNYmlRG_Oe-7mpkPA.png" data-width="2190" data-height="1662" src="https://cdn-images-1.medium.com/max/800/1*DITRZSNYmlRG_Oe-7mpkPA.png"></figure><figure name="56af" id="56af" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*M_l2PwZ2jXc9Ac1s-1wW3g.png" data-width="2194" data-height="1683" src="https://cdn-images-1.medium.com/max/800/1*M_l2PwZ2jXc9Ac1s-1wW3g.png"></figure><p name="2779" id="2779" class="graf graf--p graf-after--figure">Command to run the playbook : <strong class="markup--strong markup--p-strong">ansible-playbook namenode.yml</strong></p><figure name="3d4b" id="3d4b" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*U3dBza_Lg-2j7spXO1LhBg.png" data-width="2243" data-height="1580" src="https://cdn-images-1.medium.com/max/800/1*U3dBza_Lg-2j7spXO1LhBg.png"></figure><figure name="f17b" id="f17b" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*lXKegA5eepe8vstxL3gLAw.png" data-width="2244" data-height="1693" src="https://cdn-images-1.medium.com/max/800/1*lXKegA5eepe8vstxL3gLAw.png"></figure><h3 name="11ce" id="11ce" class="graf graf--h3 graf-after--figure">Verifying the ansible-playbook</h3><p name="a56e" id="a56e" class="graf graf--p graf-after--h3">Going Redhat 8_1 NameNode Terminal</p><figure name="5d49" id="5d49" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*MNFq1VFSUjEAQ2PNjW251w.png" data-width="1844" data-height="1263" src="https://cdn-images-1.medium.com/max/800/1*MNFq1VFSUjEAQ2PNjW251w.png"></figure><figure name="9021" id="9021" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*zqVYNDALLzDWckSA2JkuSg.png" data-width="1840" data-height="1251" src="https://cdn-images-1.medium.com/max/800/1*zqVYNDALLzDWckSA2JkuSg.png"></figure><p name="2b9e" id="2b9e" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Here you can see the NameNode (master node) is started successfully</strong></p><h3 name="e557" id="e557" class="graf graf--h3 graf-after--p">DataNode Playbook:</h3><p name="e1a4" id="e1a4" class="graf graf--p graf-after--h3">Steps for DataNode Playbook</p><h3 name="3ff3" id="3ff3" class="graf graf--h3 graf-after--p">Configuring DataNode :</h3><ul class="postList"><li name="73b8" id="73b8" class="graf graf--li graf-after--h3">Now create a hdfs-site.xml file for DataNode:</li></ul><p name="b62d" id="b62d" class="graf graf--p graf-after--li">Writing the hdfs-site.xml file for DataNode</p><figure name="8adf" id="8adf" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HwfttTiYnRFV1XTx-Vmq4g.png" data-width="1916" data-height="1258" src="https://cdn-images-1.medium.com/max/800/1*HwfttTiYnRFV1XTx-Vmq4g.png"></figure><ul class="postList"><li name="a247" id="a247" class="graf graf--li graf-after--figure">Now create a core-site.xml file :</li></ul><p name="8346" id="8346" class="graf graf--p graf-after--li">Writing the core-site.xml file for DataNode</p><figure name="390d" id="390d" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*HiaLt1Q2XXYjH9xg9nlvAA.png" data-width="1907" data-height="1252" src="https://cdn-images-1.medium.com/max/800/1*HiaLt1Q2XXYjH9xg9nlvAA.png"></figure><h3 name="e479" id="e479" class="graf graf--h3 graf-after--figure"><strong class="markup--strong markup--h3-strong">Writing the datanode.yml file for DataNode Ansible-Playbook:</strong></h3><ul class="postList"><li name="6eea" id="6eea" class="graf graf--li graf-after--h3">Install JDK.</li><li name="ddea" id="ddea" class="graf graf--li graf-after--li">Install Hadoop.</li><li name="0137" id="0137" class="graf graf--li graf-after--li">Configure the core-sitx.xml and hdfs-site.xml file.</li><li name="468e" id="468e" class="graf graf--li graf-after--li">Create Directory.</li><li name="4b77" id="4b77" class="graf graf--li graf-after--li">Start the Hadoop service in Node</li><li name="f385" id="f385" class="graf graf--li graf-after--li">Check the Report.</li></ul><figure name="a370" id="a370" class="graf graf--figure graf-after--li"><img class="graf-image" data-image-id="1*nOLIBJLCMrGZ6Bm1UaJLjQ.png" data-width="2197" data-height="1666" src="https://cdn-images-1.medium.com/max/800/1*nOLIBJLCMrGZ6Bm1UaJLjQ.png"></figure><figure name="f38e" id="f38e" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*tbGikc7eCLL2UlOsPN6UWg.png" data-width="2192" data-height="1693" src="https://cdn-images-1.medium.com/max/800/1*tbGikc7eCLL2UlOsPN6UWg.png"></figure><ul class="postList"><li name="f799" id="f799" class="graf graf--li graf-after--figure">running ansible-playbook</li></ul><p name="5445" id="5445" class="graf graf--p graf-after--li">Using ansible-playbook command to run the playbook</p><figure name="d3c5" id="d3c5" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*4x9vUEVsjxmtyQBYi_krxw.png" data-width="2201" data-height="1607" src="https://cdn-images-1.medium.com/max/800/1*4x9vUEVsjxmtyQBYi_krxw.png"></figure><figure name="fda0" id="fda0" class="graf graf--figure graf-after--figure"><img class="graf-image" data-image-id="1*lRYkHZwTKSbjfd1nK91jOQ.png" data-width="2227" data-height="1685" src="https://cdn-images-1.medium.com/max/800/1*lRYkHZwTKSbjfd1nK91jOQ.png"></figure><h3 name="6436" id="6436" class="graf graf--h3 graf-after--figure">Checking if installed properly or not</h3><p name="314c" id="314c" class="graf graf--p graf-after--h3">Redhat 8_2 DataNode</p><figure name="b439" id="b439" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*spQCVdCrJYo2F8who7kE2w.png" data-width="1842" data-height="1254" src="https://cdn-images-1.medium.com/max/800/1*spQCVdCrJYo2F8who7kE2w.png"></figure><p name="a930" id="a930" class="graf graf--p graf-after--figure">Now check Datanode is connected to Namenode or not.</p><p name="1a15" id="1a15" class="graf graf--p graf-after--p">To check use command <strong class="markup--strong markup--p-strong">hadoop dfsadmin -report</strong></p><figure name="1c55" id="1c55" class="graf graf--figure graf-after--p"><img class="graf-image" data-image-id="1*zr_z04iXx7-rkAsFagwk1Q.png" data-width="1811" data-height="1383" src="https://cdn-images-1.medium.com/max/800/1*zr_z04iXx7-rkAsFagwk1Q.png"></figure><p name="01cc" id="01cc" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">So that’s how we can set up the Hadoop cluster using Ansible.</strong></p><h3 name="813c" id="813c" class="graf graf--h3 graf-after--p">Conclusion</h3><p name="e48b" id="e48b" class="graf graf--p graf-after--h3 graf--trailing">We have learned how to configure Softwares which have clustering technology. In this way, we can set up Hadoop clusters with the help of Ansible Automation.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@tiybok45" class="p-author h-card">Rutvik Bhalerao</a> on <a href="https://medium.com/p/e01e4247f88e"><time class="dt-published" datetime="2022-06-11T17:41:01.588Z">June 11, 2022</time></a>.</p><p><a href="https://medium.com/@tiybok45/deploy-hadoop-cluster-via-ansible-playbook-e01e4247f88e" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 22, 2022.</p></footer></article></body></html>