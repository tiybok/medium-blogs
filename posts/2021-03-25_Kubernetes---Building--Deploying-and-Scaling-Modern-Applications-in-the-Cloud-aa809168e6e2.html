<!DOCTYPE html><html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Kubernetes : Building, Deploying and Scaling Modern Applications in the Cloud</title><style>
      * {
        font-family: Georgia, Cambria, "Times New Roman", Times, serif;
      }
      html, body {
        margin: 0;
        padding: 0;
      }
      h1 {
        font-size: 50px;
        margin-bottom: 17px;
        color: #333;
      }
      h2 {
        font-size: 24px;
        line-height: 1.6;
        margin: 30px 0 0 0;
        margin-bottom: 18px;
        margin-top: 33px;
        color: #333;
      }
      h3 {
        font-size: 30px;
        margin: 10px 0 20px 0;
        color: #333;
      }
      header {
        width: 640px;
        margin: auto;
      }
      section {
        width: 640px;
        margin: auto;
      }
      section p {
        margin-bottom: 27px;
        font-size: 20px;
        line-height: 1.6;
        color: #333;
      }
      section img {
        max-width: 640px;
      }
      footer {
        padding: 0 20px;
        margin: 50px 0;
        text-align: center;
        font-size: 12px;
      }
      .aspectRatioPlaceholder {
        max-width: auto !important;
        max-height: auto !important;
      }
      .aspectRatioPlaceholder-fill {
        padding-bottom: 0 !important;
      }
      header,
      section[data-field=subtitle],
      section[data-field=description] {
        display: none;
      }
      </style></head><body><article class="h-entry">
<header>
<h1 class="p-name">Kubernetes : Building, Deploying and Scaling Modern Applications in the Cloud</h1>
</header>
<section data-field="subtitle" class="p-summary">
Industry Used Case on Kubernetes : CERN[European Council for Nuclear Research]
</section>
<section data-field="body" class="e-content">
<section name="ee9d" class="section section--body section--first section--last"><div class="section-divider"><hr class="section-divider"></div><div class="section-content"><div class="section-inner sectionLayout--insetColumn"><figure name="38e2" id="38e2" class="graf graf--figure graf--leading"><img class="graf-image" data-image-id="1*n89BwSw7Qce2IpHXAhq6Lg.png" data-width="1600" data-height="345" src="https://cdn-images-1.medium.com/max/800/1*n89BwSw7Qce2IpHXAhq6Lg.png"></figure><h3 name="7ff2" id="7ff2" class="graf graf--h3 graf-after--figure graf--title">Kubernetes : Building, Deploying and Scaling Modern Applications in the Cloud</h3><p name="51bf" id="51bf" class="graf graf--p graf-after--h3">Industry Used Case on Kubernetes :</p><p name="6ab5" id="6ab5" class="graf graf--p graf-after--p">CERN[European Council for Nuclear Research]</p><h3 name="0f83" id="0f83" class="graf graf--h3 graf-after--p">What is Kubernetes ?</h3><p name="ef30" id="ef30" class="graf graf--p graf-after--h3">Kubernetes is a portable, extensible, open-source platform for managing containerized workloads and services, that facilitates both declarative configuration and automation. It has a large, rapidly growing ecosystem. Kubernetes services, support, and tools are widely available.</p><p name="aaa4" id="aaa4" class="graf graf--p graf-after--p">The name Kubernetes originates from Greek, meaning helmsman or pilot. Google open-sourced the Kubernetes project in 2014. Kubernetes combines running production workloads at scale with best-of-breed ideas and practices from the community.</p><h4 name="7844" id="7844" class="graf graf--h4 graf-after--p">Going back in time</h4><figure name="8b0d" id="8b0d" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*8uubaNl2pwxHxcqo0fdFzQ.png" data-width="1614" data-height="600" src="https://cdn-images-1.medium.com/max/800/1*8uubaNl2pwxHxcqo0fdFzQ.png"></figure><p name="1975" id="1975" class="graf graf--p graf-after--figure"><strong class="markup--strong markup--p-strong">Traditional deployment era:</strong> Early on, organizations ran applications on physical servers. There was no way to define resource boundaries for applications in a physical server, and this caused resource allocation issues. For example, if multiple applications run on a physical server, there can be instances where one application would take up most of the resources, and as a result, the other applications would underperform. A solution for this would be to run each application on a different physical server. But this did not scale as resources were underutilized, and it was expensive for organizations to maintain many physical servers.</p><p name="1db7" id="1db7" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Virtualized deployment era:</strong> As a solution, virtualization was introduced. It allows you to run multiple Virtual Machines (VMs) on a single physical server’s CPU. Virtualization allows applications to be isolated between VMs and provides a level of security as the information of one application cannot be freely accessed by another application.</p><p name="9636" id="9636" class="graf graf--p graf-after--p">Virtualization allows better utilization of resources in a physical server and allows better scalability because an application can be added or updated easily, reduces hardware costs, and much more. With virtualization you can present a set of physical resources as a cluster of disposable virtual machines.</p><p name="1078" id="1078" class="graf graf--p graf-after--p">Each VM is a full machine running all the components, including its own operating system, on top of the virtualized hardware.</p><p name="76df" id="76df" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Container deployment era:</strong> Containers are similar to VMs, but they have relaxed isolation properties to share the Operating System (OS) among the applications. Therefore, containers are considered lightweight. Similar to a VM, a container has its own filesystem, share of CPU, memory, process space, and more. As they are decoupled from the underlying infrastructure, they are portable across clouds and OS distributions.</p><h4 name="e429" id="e429" class="graf graf--h4 graf-after--p">Why you need containers?</h4><p name="7e5d" id="7e5d" class="graf graf--p graf-after--h4">Today’s internet user never accept downtime. Therefore developers have to find a method to perform maintenance and update without interrupting their services.</p><p name="36bc" id="36bc" class="graf graf--p graf-after--p">Therefore container, which is isolated environments. It includes everything needed for application to run. It makes it easy for a developer to edit and deploying apps. Moreover, containerization has become a preferred method for packaging, deploying, and update web apps.</p><h3 name="9888" id="9888" class="graf graf--h3 graf-after--p">What task are performed by Kubernetes ?</h3><p name="381c" id="381c" class="graf graf--p graf-after--h3">Kubernetes is the Linux kernel which is used for distributed systems. It helps you to be abstract the underlying hardware of the nodes(servers) and offers a consistent interface for applications that consume the shared pool of resources.</p><h3 name="9417" id="9417" class="graf graf--h3 graf-after--p">Why use Kubernetes?</h3><p name="b931" id="b931" class="graf graf--p graf-after--h3">Kubernetes helps you to control the resource allocation and traffic management for cloud applications and microservices. It also helps to simplify various aspects of service-oriented infrastructures. Kubernetes allows you to assure where and when containerized applications run and helps you to find resources and tools you want to work with.</p><h3 name="92b1" id="92b1" class="graf graf--h3 graf-after--p">Features of Kubernetes</h3><figure name="8a54" id="8a54" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*91lpaypqnBdNmqJSQk85-g.png" data-width="2048" data-height="594" src="https://cdn-images-1.medium.com/max/800/1*91lpaypqnBdNmqJSQk85-g.png"></figure><ul class="postList"><li name="4dae" id="4dae" class="graf graf--li graf-after--figure">Automated Scheduling</li><li name="54fb" id="54fb" class="graf graf--li graf-after--li">Self-Healing Capabilities</li><li name="92d8" id="92d8" class="graf graf--li graf-after--li">Automated rollouts &amp; rollback</li><li name="d01e" id="d01e" class="graf graf--li graf-after--li">Horizontal Scaling &amp; Load Balancing</li><li name="6192" id="6192" class="graf graf--li graf-after--li">Offers environment consistency for development, testing, and production</li><li name="bc02" id="bc02" class="graf graf--li graf-after--li">Infrastructure is loosely coupled to each component can act as a separate unit</li><li name="a73d" id="a73d" class="graf graf--li graf-after--li">Provides a higher density of resource utilization</li><li name="2d1e" id="2d1e" class="graf graf--li graf-after--li">Offers enterprise-ready features</li><li name="54b9" id="54b9" class="graf graf--li graf-after--li">Application-centric management</li><li name="3244" id="3244" class="graf graf--li graf-after--li">Auto-scalable infrastructure</li><li name="e160" id="e160" class="graf graf--li graf-after--li">You can create predictable infrastructure</li></ul><h3 name="e65d" id="e65d" class="graf graf--h3 graf-after--li">Kubernetes Basics And Architecture:</h3><h4 name="fd04" id="fd04" class="graf graf--h4 graf-after--h3">Basics of Kubernetes:</h4><p name="411d" id="411d" class="graf graf--p graf-after--h4"><strong class="markup--strong markup--p-strong">Cluster:</strong> It is a collection of hosts(servers) that helps you to aggregate their available resources. That includes ram, CPU, ram, disk, and their devices into a usable pool.</p><p name="1259" id="1259" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Master:</strong>The master is a collection of components which make up the control panel of Kubernetes. These components are used for all cluster decisions. It includes both scheduling and responding to cluster events.</p><p name="a9b8" id="a9b8" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Node:</strong>It is a single host which is capable of running on a physical or virtual machine. A node should run both kube-proxy, minikube, and kubelet which are considered as a part of the cluster.</p><p name="81cd" id="81cd" class="graf graf--p graf-after--p"><strong class="markup--strong markup--p-strong">Namespace:</strong>It is a logical cluster or environment. It is a widely used method which is used for scoping access or dividing a cluster.</p><h4 name="1d92" id="1d92" class="graf graf--h4 graf-after--p">Kubernetes Architecture:</h4><figure name="18ff" id="18ff" class="graf graf--figure graf-after--h4"><img class="graf-image" data-image-id="1*92c0JBjQ71_jN7WB7pFTAQ.png" data-width="1536" data-height="936" src="https://cdn-images-1.medium.com/max/800/1*92c0JBjQ71_jN7WB7pFTAQ.png"></figure><p name="ecc2" id="ecc2" class="graf graf--p graf-after--figure">Kubernetes follows a client-server architecture. It’s possible to have a multi-master setup (for high availability), but by default there is a single master server which acts as a controlling node and point of contact. The master server consists of various components including a kube-apiserver, an etcd storage, a kube-controller-manager, a cloud-controller-manager, a kube-scheduler, and a DNS server for Kubernetes services. Node components include kubelet and kube-proxy on top of Docker.</p><h3 name="d39f" id="d39f" class="graf graf--h3 graf-after--p">Advantages And Disadvantages of Kubernetes:</h3><p name="012e" id="012e" class="graf graf--p graf-after--h3"><strong class="markup--strong markup--p-strong">Advantages of Kubernetes:</strong></p><ul class="postList"><li name="c0e7" id="c0e7" class="graf graf--li graf-after--p">Easy organization of service with pods</li><li name="5aa1" id="5aa1" class="graf graf--li graf-after--li">It is developed by Google, who bring years of valuable industry experience to the table</li><li name="1e0d" id="1e0d" class="graf graf--li graf-after--li">Largest community among container orchestration tools</li><li name="0b70" id="0b70" class="graf graf--li graf-after--li">Offers a variety of storage options, including on-premises, SANs and public clouds</li><li name="0ab8" id="0ab8" class="graf graf--li graf-after--li">Adheres to the principals of immutable infrastructure</li><li name="6cc0" id="6cc0" class="graf graf--li graf-after--li">Kubernetes can run on-premises bare metal, OpenStack, public clouds Google, Azure, AWS, etc.</li><li name="d288" id="d288" class="graf graf--li graf-after--li">Helps you to avoid vendor lock issues as it can use any vendor-specific APIs or services except where Kubernetes provides an abstraction, e.g., load balancer and storage.</li><li name="60d9" id="60d9" class="graf graf--li graf-after--li">Containerization using kubernetes allows package software to serve these goals. It will enable applications that need to be released and updated without any downtime.</li><li name="bb91" id="bb91" class="graf graf--li graf-after--li">Kubernetes allows you to assure those containerized applications run where and when you want and helps you to find resources and tools which you want to work.</li></ul><p name="27ab" id="27ab" class="graf graf--p graf-after--li"><strong class="markup--strong markup--p-strong">Disadvantages of Kubernetes</strong></p><ul class="postList"><li name="5ba2" id="5ba2" class="graf graf--li graf-after--p">Kubenetes dashboard not as useful as it should be</li><li name="59cb" id="59cb" class="graf graf--li graf-after--li">Kubernetes is a little bit complicated and unnecessary in environments where all development is done locally.</li><li name="c9ea" id="c9ea" class="graf graf--li graf-after--li">Security is not very effective.</li></ul><h3 name="3d27" id="3d27" class="graf graf--h3 graf-after--li">USE CASES OF KUBERNETES:</h3><h3 name="568f" id="568f" class="graf graf--h3 graf-after--h3">CERN[European Council for Nuclear Research]</h3><figure name="7874" id="7874" class="graf graf--figure graf-after--h3"><img class="graf-image" data-image-id="1*toj5jm9x7yRELcktBhnr9g.png" data-width="3352" data-height="1973" data-is-featured="true" src="https://cdn-images-1.medium.com/max/800/1*toj5jm9x7yRELcktBhnr9g.png"></figure><h3 name="95d0" id="95d0" class="graf graf--h3 graf-after--figure">Challenge</h3><p name="a840" id="a840" class="graf graf--p graf-after--h3">At CERN, the European Organization for Nuclear Research, physicists conduct experiments to learn about fundamental science. In its particle accelerators, “we accelerate protons to very high energy, close to the speed of light, and we make the two beams of protons collide,” says CERN Software Engineer Ricardo Rocha. The end result is a lot of data that we have to process. CERN currently stores 330 petabytes of data in its data centers, and an upgrade of its accelerators expected in the next few years will drive that number up by 10x. Additionally, the organization experiences extreme peaks in its workloads during periods prior to big conferences, and needs its infrastructure to scale to those peaks. “We want to have a more hybrid infrastructure, where we have our on premise infrastructure but can make use of public clouds temporarily when these peaks come up,” says Rocha. “We’ve been looking to new technologies that can help improve our efficiency in our infrastructure so that we can dedicate more of our resources to the actual processing of the data.”</p><h3 name="595b" id="595b" class="graf graf--h3 graf-after--p">Solution</h3><p name="6f1f" id="6f1f" class="graf graf--p graf-after--h3">CERN’s technology team embraced containerization and cloud native practices, choosing Kubernetes for orchestration,Helm for deployment, Prometheus for monitoring, and CoreDNS for DNS resolution inside the clusters. Kubernetes federation has allowed the organization to run some production workloads both on premise and in public clouds.</p><h3 name="830d" id="830d" class="graf graf--h3 graf-after--p">Impact</h3><blockquote name="ea9d" id="ea9d" class="graf graf--blockquote graf-after--h3">Kubernetes gives us the full automation of the application,It comes with built-in monitoring and logging for all the applications and the workloads that deploy in Kubernetes. This is a massive simplification of our current deployments.</blockquote><p name="33a9" id="33a9" class="graf graf--p graf-after--blockquote">The time to deploy a new cluster for a complex distributed storage system has gone from more than 3 hours to less than 15 minutes. Adding new nodes to a cluster used to take more than an hour; now it takes less than 2 minutes. The time it takes to autoscale replicas for system components has decreased from more than an hour to less than 2 minutes. Initially, virtualization gave 20% overhead, but with tuning this was reduced to ~5%. Moving to Kubernetes on bare metal would get this to 0%. Not having to host virtual machines is expected to also get 10% of memory capacity back.</p><blockquote name="7d7f" id="7d7f" class="graf graf--blockquote graf-after--p">Kubernetes is something we can relate to very much because it’s naturally distributed. What it gives us is a uniform API across heterogeneous resources to define our workloads. This is something we struggled with a lot in the past when we want to expand our resources outside our infrastructure.</blockquote><p name="60d8" id="60d8" class="graf graf--p graf-after--blockquote">With a mission of researching fundamental science, and a stable of extremely large machines, the European Organization for Nuclear Research (CERN) operates at what can only be described as hyperscale.</p><p name="69f5" id="69f5" class="graf graf--p graf-after--p">Experiments are conducted in particle accelerators, the biggest of which is 27 kilometers in circumference. “We accelerate protons to very high energy, to close to the speed of light, and we make the two beams of protons collide in well-defined places,” says CERN Software Engineer Ricardo Rocha. “We build experiments around these places where we do the collisions. The end result is a lot of data that we have to process.”And he does mean a lot: CERN currently stores and processes 330 petabytes of data — gathered from 4,300 projects and 3,300 users — using 10,000 hypervisors and 320,000 cores in its data centers.</p><p name="9959" id="9959" class="graf graf--p graf-after--p">Over the years, the CERN technology department has built a large computing infrastructure, based on OpenStack private clouds, to help the organization’s physicists analyze and treat all this data. The organization experiences extreme peaks in its workloads. “Very often, just before conferences, physicists want to do an enormous amount of extra analysis to publish their papers, and we have to scale to these peaks, which means overcommitting resources in some cases,We want to have a more hybrid infrastructure, where we have our on premise infrastructure but can make use of public clouds temporarily when these peaks come up.” says Rocha.</p><p name="303d" id="303d" class="graf graf--p graf-after--p">Additionally, few years ago, CERN announced that it would be doing a big upgrade of its accelerators, which will mean a ten-fold increase in the amount of data that can be collected. “So we’ve been looking to new technologies that can help improve our efficiency in our infrastructure, so that we can dedicate more of our resources to the actual processing of the data,” says Rocha.</p><p name="dd60" id="dd60" class="graf graf--p graf-after--p">We started looking at Kubernetes and containerization in the second half of 2015. We’ve been using distributed infrastructures for decades now.</p><blockquote name="abfb" id="abfb" class="graf graf--blockquote graf-after--p">Kubernetes is something we can relate to very much because it’s naturally distributed. What it gives us is a uniform API across heterogeneous resources to define our workloads. This is something we struggled with a lot in the past when we want to expand our resources outside our infrastructure.</blockquote><p name="fb19" id="fb19" class="graf graf--p graf-after--blockquote">The team created a prototype system for users to deploy their own Kubernetes cluster in CERN’s infrastructure, and spent six months validating the use cases and making sure that Kubernetes integrated with CERN’s internal systems. The main use case is batch workloads, which represent more than 80% of resource usage at CERN. (One single project that does most of the physics data processing and analysis alone consumes 250,000 cores.) “This is something where the investment in simplification of the deployment, logging, and monitoring pays off very quickly,” says Rocha. Other use cases include Spark-based data analysis and machine learning to improve physics analysis. “The fact that most of these technologies integrate very well with Kubernetes makes our lives easier,” he adds.</p><p name="59f3" id="59f3" class="graf graf--p graf-after--p">The system went into production in October 2016, also using Helm for deployment, Prometheus for monitoring, and CoreDNS for DNS resolution within the cluster.</p><blockquote name="0a32" id="0a32" class="graf graf--blockquote graf-after--p">One thing that Kubernetes gives us is the full automation of the application So it comes with built-in monitoring and logging for all the applications and the workloads that deploy in Kubernetes. This is a massive simplification of our current deployments.</blockquote><p name="952a" id="952a" class="graf graf--p graf-after--blockquote">The time to deploy a new cluster for a complex distributed storage system has gone from more than 3 hours to less than 15 minutes.</p><p name="a2b6" id="a2b6" class="graf graf--p graf-after--p">Adding new nodes to a cluster used to take more than an hour; now it takes less than 2 minutes. The time it takes to autoscale replicas for system components has decreased from more than an hour to less than 2 minutes.</p><p name="5e6b" id="5e6b" class="graf graf--p graf-after--p">Rocha points out that the metric used in the particle accelerators may be events per second, but in reality “it’s how fast and how much of the data we can process that actually counts.” And efficiency has certainly been improved with Kubernetes. Initially, virtualization gave 20% overhead, but with tuning this was reduced to ~5%. Moving to Kubernetes on bare metal would get this to 0%. Not having to host virtual machines is expected to also get 10% of memory capacity back.</p><blockquote name="e15b" id="e15b" class="graf graf--blockquote graf-after--p">These new technologies aren’t just enabling infrastructure improvements. CERN also uses the Kubernetes-based Reana/Recast platform for reusable analysis, which is “the ability to define physics analysis as a set of workflows that are fully containerized in one single entry point.</blockquote><p name="c0eb" id="c0eb" class="graf graf--p graf-after--blockquote graf--trailing">This means that the physicist can build his or her analysis and publish it in a repository, share it with colleagues, and in 10 years redo the same analysis with new data. If we looked back even 10 years, this was just a dream.</p></div></div></section>
</section>
<footer><p>By <a href="https://medium.com/@tiybok45" class="p-author h-card">Rutvik Bhalerao</a> on <a href="https://medium.com/p/aa809168e6e2"><time class="dt-published" datetime="2021-03-25T06:42:02.391Z">March 25, 2021</time></a>.</p><p><a href="https://medium.com/@tiybok45/kubernetes-building-deploying-and-scaling-modern-applications-in-the-cloud-aa809168e6e2" class="p-canonical">Canonical link</a></p><p>Exported from <a href="https://medium.com">Medium</a> on September 22, 2022.</p></footer></article></body></html>